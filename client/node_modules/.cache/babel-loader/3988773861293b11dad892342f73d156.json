{"ast":null,"code":"import _regeneratorRuntime from\"F:/web dev files/MERN Blog Website/back-end-blog-website/front-end-blog-website/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"F:/web dev files/MERN Blog Website/back-end-blog-website/front-end-blog-website/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"F:/web dev files/MERN Blog Website/back-end-blog-website/front-end-blog-website/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{useContext}from'react';import{useRef}from'react';import{Link}from\"react-router-dom\";import\"./login.css\";import{Context}from'../../context/Context';import axios from\"axios\";import{useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var userRef=useRef();var passwordRef=useRef();var _useContext=useContext(Context),dispatch=_useContext.dispatch,isFetching=_useContext.isFetching;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isInvalid=_useState2[0],setInvalid=_useState2[1];var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();dispatch({type:\"LOGIN_START\"});_context.prev=2;_context.next=5;return axios.post(\"http://localhost:5000/api/auth/login\",{userName:userRef.current.value,password:passwordRef.current.value});case 5:res=_context.sent;if(res){dispatch({type:\"LOGIN_SUCCESS\",payload:res.data});}else{setInvalid(true);dispatch({type:\"LOGIN_FAILURE\"});}_context.next=13;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](2);setInvalid(true);dispatch({type:\"LOGIN_FAILURE\"});case 13:case\"end\":return _context.stop();}}},_callee,null,[[2,9]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"login\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"loginEmail\",required:true,id:\"login-email\",ref:userRef,placeholder:\"Enter username...\",autoFocus:true}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"loginPass\",required:true,id:\"login-pass\",ref:passwordRef,placeholder:\"Enter password...\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"login-btn\",disabled:isFetching,children:\"Login\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"register-btn\",children:/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"link\",children:\"Register\"})}),isInvalid&&/*#__PURE__*/_jsx(\"span\",{style:{color:\"red\",textAlign:\"center\",marginTop:\"1rem\",fontSize:\"20px\",fontFamily:\"sans-serif\"},children:\"Wrong Credentials\"})]});};export default Login;","map":{"version":3,"names":["React","useContext","useRef","Link","Context","axios","useState","Login","userRef","passwordRef","dispatch","isFetching","isInvalid","setInvalid","handleSubmit","e","preventDefault","type","post","userName","current","value","password","res","payload","data","color","textAlign","marginTop","fontSize","fontFamily"],"sources":["F:/web dev files/MERN Blog Website/back-end-blog-website/front-end-blog-website/src/components/login/Login.jsx"],"sourcesContent":["import React from 'react'\r\nimport { useContext } from 'react';\r\nimport { useRef } from 'react';\r\nimport { Link } from \"react-router-dom\";\r\nimport \"./login.css\"\r\nimport { Context } from '../../context/Context';\r\nimport axios from \"axios\";\r\nimport { useState } from 'react';\r\n\r\nconst Login = () => {\r\n\r\n  const userRef = useRef();\r\n  const passwordRef = useRef();\r\n  const { dispatch, isFetching } = useContext(Context);\r\n  const [isInvalid, setInvalid] = useState(false);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    dispatch({ type: \"LOGIN_START\" });\r\n    try {\r\n      const res = await axios.post(\"http://localhost:5000/api/auth/login\", {\r\n        userName: userRef.current.value,\r\n        password: passwordRef.current.value\r\n      });\r\n      if (res) {\r\n        dispatch({ type: \"LOGIN_SUCCESS\", payload: res.data });\r\n      } else {\r\n        setInvalid(true);\r\n        dispatch({ type: \"LOGIN_FAILURE\" });\r\n      }\r\n    } catch (error) {\r\n      setInvalid(true);\r\n      dispatch({ type: \"LOGIN_FAILURE\" });\r\n    }\r\n  }\r\n  \r\n  return (\r\n    <div className='login'>\r\n          <h1>Login</h1>\r\n          <form onSubmit={handleSubmit}>\r\n              <input type=\"text\" name=\"loginEmail\" required={true} id=\"login-email\" ref={userRef} placeholder='Enter username...' autoFocus={ true } />\r\n              <input type=\"password\" name=\"loginPass\" required={true} id=\"login-pass\" ref={passwordRef} placeholder='Enter password...' />\r\n              <button type=\"submit\" className='login-btn' disabled={ isFetching }>Login</button>\r\n          </form>\r\n      <button type=\"button\" className='register-btn'>\r\n        <Link to=\"/register\" className='link'>Register</Link>\r\n      </button>\r\n      {isInvalid && <span style={{ color: \"red\", textAlign: \"center\", marginTop: \"1rem\", fontSize: \"20px\", fontFamily: \"sans-serif\" }}>Wrong Credentials</span>}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Login\r\n"],"mappings":"+fAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,OAASC,UAAT,KAA2B,OAA3B,CACA,OAASC,MAAT,KAAuB,OAAvB,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAO,aAAP,CACA,OAASC,OAAT,KAAwB,uBAAxB,CACA,MAAOC,MAAP,KAAkB,OAAlB,CACA,OAASC,QAAT,KAAyB,OAAzB,C,wFAEA,GAAMC,MAAK,CAAG,QAARA,MAAQ,EAAM,CAElB,GAAMC,QAAO,CAAGN,MAAM,EAAtB,CACA,GAAMO,YAAW,CAAGP,MAAM,EAA1B,CACA,gBAAiCD,UAAU,CAACG,OAAD,CAA3C,CAAQM,QAAR,aAAQA,QAAR,CAAkBC,UAAlB,aAAkBA,UAAlB,CACA,cAAgCL,QAAQ,CAAC,KAAD,CAAxC,wCAAOM,SAAP,eAAkBC,UAAlB,eAEA,GAAMC,aAAY,4FAAG,iBAAOC,CAAP,4HACnBA,CAAC,CAACC,cAAF,GACAN,QAAQ,CAAC,CAAEO,IAAI,CAAE,aAAR,CAAD,CAAR,CAFmB,sCAICZ,MAAK,CAACa,IAAN,CAAW,sCAAX,CAAmD,CACnEC,QAAQ,CAAEX,OAAO,CAACY,OAAR,CAAgBC,KADyC,CAEnEC,QAAQ,CAAEb,WAAW,CAACW,OAAZ,CAAoBC,KAFqC,CAAnD,CAJD,QAIXE,GAJW,eAQjB,GAAIA,GAAJ,CAAS,CACPb,QAAQ,CAAC,CAAEO,IAAI,CAAE,eAAR,CAAyBO,OAAO,CAAED,GAAG,CAACE,IAAtC,CAAD,CAAR,CACD,CAFD,IAEO,CACLZ,UAAU,CAAC,IAAD,CAAV,CACAH,QAAQ,CAAC,CAAEO,IAAI,CAAE,eAAR,CAAD,CAAR,CACD,CAbgB,+EAejBJ,UAAU,CAAC,IAAD,CAAV,CACAH,QAAQ,CAAC,CAAEO,IAAI,CAAE,eAAR,CAAD,CAAR,CAhBiB,oEAAH,kBAAZH,aAAY,4CAAlB,CAoBA,mBACE,aAAK,SAAS,CAAC,OAAf,wBACM,6BADN,cAEM,cAAM,QAAQ,CAAEA,YAAhB,wBACI,cAAO,IAAI,CAAC,MAAZ,CAAmB,IAAI,CAAC,YAAxB,CAAqC,QAAQ,CAAE,IAA/C,CAAqD,EAAE,CAAC,aAAxD,CAAsE,GAAG,CAAEN,OAA3E,CAAoF,WAAW,CAAC,mBAAhG,CAAoH,SAAS,CAAG,IAAhI,EADJ,cAEI,cAAO,IAAI,CAAC,UAAZ,CAAuB,IAAI,CAAC,WAA5B,CAAwC,QAAQ,CAAE,IAAlD,CAAwD,EAAE,CAAC,YAA3D,CAAwE,GAAG,CAAEC,WAA7E,CAA0F,WAAW,CAAC,mBAAtG,EAFJ,cAGI,eAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,WAAhC,CAA4C,QAAQ,CAAGE,UAAvD,mBAHJ,GAFN,cAOE,eAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,cAAhC,uBACE,KAAC,IAAD,EAAM,EAAE,CAAC,WAAT,CAAqB,SAAS,CAAC,MAA/B,sBADF,EAPF,CAUGC,SAAS,eAAI,aAAM,KAAK,CAAE,CAAEc,KAAK,CAAE,KAAT,CAAgBC,SAAS,CAAE,QAA3B,CAAqCC,SAAS,CAAE,MAAhD,CAAwDC,QAAQ,CAAE,MAAlE,CAA0EC,UAAU,CAAE,YAAtF,CAAb,+BAVhB,GADF,CAcD,CAzCD,CA2CA,cAAevB,MAAf"},"metadata":{},"sourceType":"module"}